#include <iostream>

using namespace std;

const int MAXN = 2000000;
const int ans[511][2]=
{{1,7},
{2,3},
{3,91},
{4,8},
{5,97},
{6,27},
{7,1177},
{8,7},
{9,7},
{10,125},
{11,1337},
{12,1001},
{13,34527},
{14,6393},
{15,48041},
{16,6},
{17,44},
{18,415},
{19,1033},
{20,216},
{21,608},
{22,4977},
{23,9867},
{24,49},
{25,49},
{26,2753},
{27,71735},
{28,47089},
{29,245035},
{30,569669},
{31,2662657},
{32,5},
{33,7},
{34,27},
{35,91},
{36,27},
{37,219},
{38,27},
{39,1177},
{40,7},
{41,7},
{42,125},
{43,29913},
{44,1001},
{45,34527},
{46,6393},
{47,246297},
{48,49},
{49,49},
{50,415},
{51,4577},
{52,1975},
{53,3879},
{54,4977},
{55,28099},
{56,49},
{57,49},
{58,37131},
{59,218301},
{60,48769},
{61,245035},
{62,569669},
{63,11814485},
{64,2},
{65,7},
{66,3},
{67,91},
{68,8},
{69,97},
{70,27},
{71,1177},
{72,7},
{73,7},
{74,125},
{75,1337},
{76,1001},
{77,34527},
{78,6393},
{79,48041},
{80,6},
{81,44},
{82,415},
{83,1033},
{84,216},
{85,608},
{86,4977},
{87,9867},
{88,49},
{89,49},
{90,2753},
{91,71735},
{92,47089},
{93,245035},
{94,569669},
{95,2662657},
{96,5},
{97,7},
{98,27},
{99,91},
{100,27},
{101,219},
{102,27},
{103,1177},
{104,7},
{105,7},
{106,125},
{107,29913},
{108,1001},
{109,34527},
{110,6393},
{111,246297},
{112,49},
{113,49},
{114,415},
{115,4577},
{116,1975},
{117,3879},
{118,4977},
{119,28099},
{120,49},
{121,49},
{122,37131},
{123,218301},
{124,48769},
{125,245035},
{126,569669},
{127,11814485},
{128,3},
{129,13},
{130,3},
{131,91},
{132,27},
{133,219},
{134,27},
{135,1177},
{136,143},
{137,167},
{138,143},
{139,1337},
{140,5719},
{141,48041},
{142,35785},
{143,48041},
{144,79},
{145,79},
{146,707},
{147,6073},
{148,3879},
{149,3879},
{150,10089},
{151,28099},
{152,2207},
{153,6307},
{154,37131},
{155,613479},
{156,47089},
{157,697563},
{158,569669},
{159,4817803},
{160,23},
{161,23},
{162,27},
{163,91},
{164,27},
{165,219},
{166,27},
{167,1177},
{168,143},
{169,7895},
{170,143},
{171,120149},
{172,5719},
{173,120407},
{174,128821},
{175,346719},
{176,79},
{177,79},
{178,1695},
{179,6073},
{180,3879},
{181,3879},
{182,23117},
{183,28099},
{184,2207},
{185,7895},
{186,37131},
{187,711725},
{188,58775},
{189,2688153},
{190,569669},
{191,11814485},
{192,3},
{193,13},
{194,3},
{195,91},
{196,27},
{197,219},
{198,27},
{199,1177},
{200,143},
{201,167},
{202,143},
{203,1337},
{204,5719},
{205,48041},
{206,35785},
{207,48041},
{208,79},
{209,79},
{210,707},
{211,6073},
{212,3879},
{213,3879},
{214,10089},
{215,28099},
{216,2207},
{217,6307},
{218,37131},
{219,613479},
{220,47089},
{221,697563},
{222,569669},
{223,4817803},
{224,23},
{225,23},
{226,27},
{227,91},
{228,27},
{229,219},
{230,27},
{231,1177},
{232,143},
{233,7895},
{234,143},
{235,120149},
{236,5719},
{237,120407},
{238,128821},
{239,346719},
{240,79},
{241,79},
{242,1695},
{243,6073},
{244,3879},
{245,3879},
{246,23117},
{247,28099},
{248,2207},
{249,7895},
{250,37131},
{251,711725},
{252,58775},
{253,2688153},
{254,569669},
{255,11814485},
{256,2},
{257,7},
{258,3},
{259,91},
{260,8},
{261,97},
{262,27},
{263,1177},
{264,7},
{265,7},
{266,125},
{267,1337},
{268,1001},
{269,34527},
{270,6393},
{271,48041},
{272,6},
{273,44},
{274,415},
{275,1033},
{276,216},
{277,608},
{278,4977},
{279,9867},
{280,49},
{281,49},
{282,2753},
{283,71735},
{284,47089},
{285,245035},
{286,569669},
{287,2662657},
{288,5},
{289,7},
{290,27},
{291,91},
{292,27},
{293,219},
{294,27},
{295,1177},
{296,7},
{297,7},
{298,125},
{299,29913},
{300,1001},
{301,34527},
{302,6393},
{303,246297},
{304,49},
{305,49},
{306,415},
{307,4577},
{308,1975},
{309,3879},
{310,4977},
{311,28099},
{312,49},
{313,49},
{314,37131},
{315,218301},
{316,48769},
{317,245035},
{318,569669},
{319,11814485},
{320,2},
{321,7},
{322,3},
{323,91},
{324,8},
{325,97},
{326,27},
{327,1177},
{328,7},
{329,7},
{330,125},
{331,1337},
{332,1001},
{333,34527},
{334,6393},
{335,48041},
{336,6},
{337,44},
{338,415},
{339,1033},
{340,216},
{341,608},
{342,4977},
{343,9867},
{344,49},
{345,49},
{346,2753},
{347,71735},
{348,47089},
{349,245035},
{350,569669},
{351,2662657},
{352,5},
{353,7},
{354,27},
{355,91},
{356,27},
{357,219},
{358,27},
{359,1177},
{360,7},
{361,7},
{362,125},
{363,29913},
{364,1001},
{365,34527},
{366,6393},
{367,246297},
{368,49},
{369,49},
{370,415},
{371,4577},
{372,1975},
{373,3879},
{374,4977},
{375,28099},
{376,49},
{377,49},
{378,37131},
{379,218301},
{380,48769},
{381,245035},
{382,569669},
{383,11814485},
{384,3},
{385,13},
{386,3},
{387,91},
{388,27},
{389,219},
{390,27},
{391,1177},
{392,143},
{393,167},
{394,143},
{395,1337},
{396,5719},
{397,48041},
{398,35785},
{399,48041},
{400,79},
{401,79},
{402,707},
{403,6073},
{404,3879},
{405,3879},
{406,10089},
{407,28099},
{408,2207},
{409,6307},
{410,37131},
{411,613479},
{412,47089},
{413,697563},
{414,569669},
{415,4817803},
{416,23},
{417,23},
{418,27},
{419,91},
{420,27},
{421,219},
{422,27},
{423,1177},
{424,143},
{425,7895},
{426,143},
{427,120149},
{428,5719},
{429,120407},
{430,128821},
{431,346719},
{432,79},
{433,79},
{434,1695},
{435,6073},
{436,3879},
{437,3879},
{438,23117},
{439,28099},
{440,2207},
{441,7895},
{442,37131},
{443,711725},
{444,58775},
{445,2688153},
{446,569669},
{447,11814485},
{448,3},
{449,13},
{450,3},
{451,91},
{452,27},
{453,219},
{454,27},
{455,1177},
{456,143},
{457,167},
{458,143},
{459,1337},
{460,5719},
{461,48041},
{462,35785},
{463,48041},
{464,79},
{465,79},
{466,707},
{467,6073},
{468,3879},
{469,3879},
{470,10089},
{471,28099},
{472,2207},
{473,6307},
{474,37131},
{475,613479},
{476,47089},
{477,697563},
{478,569669},
{479,4817803},
{480,23},
{481,23},
{482,27},
{483,91},
{484,27},
{485,219},
{486,27},
{487,1177},
{488,143},
{489,7895},
{490,143},
{491,120149},
{492,5719},
{493,120407},
{494,128821},
{495,346719},
{496,79},
{497,79},
{498,1695},
{499,6073},
{500,3879},
{501,3879},
{502,23117},
{503,28099},
{504,2207},
{505,7895},
{506,37131},
{507,711725},
{508,58775},
{509,2688153},
{510,569669},
{511,11814485}};

     
bool mark[11][MAXN];
bool used[2000];
bool ss[20];
int sss;

void turn(int base, int &x)
{
     int s = 0;
     while (x!=0){
           s += (x%base)*(x%base);
           x/=base;
     }    
     x = s;  
}

bool check(int base, int x)
{
     int x0=x;
     memset(used, 0, sizeof(used));
     turn(base, x);
     while (!used[x] && x!=1){
           used[x] = true;
           turn(base, x);
     }
     if (x==1) return true; else return false;
}
     
void prepare()
{
     int base, i;
     for (base = 2; base <= 10; base ++){
         memset(used, 0, sizeof(used));
         for (i=2; i<MAXN; i++){
             mark[base][i] = check(base, i);
         }
     }
}
    
void init()
{
     char c;
     int x;
     
     memset(ss, 0, sizeof(ss));
     while (true){
           scanf("%d", &x);
           ss[x] = true;
           scanf("%c", &c);
           if (c=='\n') break;
     }
     int s=0, i;
     for (i=10; i>=2; i--){
         if (ss[i]) s+=(1<<(10-i));
     }      
     sss=s;
}
      
bool judge(int x)
{
     int i;
     if (x<=MAXN){
          for (i=2; i<=10; i++)
              if (ss[i] && !mark[i][x]) return false;
          return true;         
     }
     else
     {
         for (i=2; i<=10; i++)
             if (ss[i] && !check(i, x)) return false;
         return true;       
     }                  
}

void work()
{
     printf("%d\n", ans[sss-1][1]);
}
     
int main()
{
    //prepare();
    int t, i;
    i = 0;
    scanf("%d", &t);
    while (t--){
          i++;
          printf("Case #%d: ", i);
          init();
          work();
    }
    return 0;
}
